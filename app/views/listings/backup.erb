<!-- this is the index.html.erb (listing) -->

<p id="notice"><%= notice %></p>

<h1>Listings</h1>

<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div class="table-responsive">
        <table class="table table-bordered table hover">
  
    <thead>
      <tr>
        <th>User</th> 
        <th>Address1</th>
        <th>Address2</th>
        <th>Postal code</th>
        <th>State</th>
        <th>Country</th>
        <th>Price</th>
        <th>Room type</th>
        <th>Description</th>
        <th>Availability</th>
        <th>Bedroom</th>
        <th>Bathroom</th>
        <th>Preview Pic</th>
      </tr>
    </thead> 


     <tbody> 
      <% @listings.each do |listing| %>
         <tr> 
          <td><%= listing.user.first_name %></td> 
          <td><%= listing.address1 %></td>
          <td><%= listing.address2 %></td>
          <td><%= listing.postal_code %></td>
          <td><%= listing.state %></td>
          <td><%= listing.country %></td>
          <td><%= listing.price %></td>
          <td><%= listing.room_type %></td>
          <td><%= listing.description %></td>
          <td><%= listing.availability %></td>
          <td><%= listing.bedroom %></td>
          <td><%= listing.bathroom %></td>
           <td><% if listing.photos.length > 0 %>
              <%= image_tag listing.photos.first, id:"listing_preview"%>
              <% else %>
              <img id="listing_preview" src="/assets/no-preview.jpg">
              <% end %>
          </td>  
                   
          <% if current_user.id == listing.user_id %>
            <td><%= link_to 'Show', listing %></td>
            <td><%= link_to 'Edit', edit_listing_path(listing) %></td>
            <td><%= link_to 'Destroy', listing, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
 </div> 
 </div>
 </div>
 </div> 

<%= paginate @listings %>

<br>

<%= link_to 'New Listing', new_listing_path %>





<!-- second attempt -->

<!-- <div class="cards row">
     <%# @listings.each_with_index do |listing, i| %>
  <div class="card col-md-3" style="height: 300px; padding-top: 8px;" >
   <div id= "card_margin" >
      <%# if listing.photos.length > 0 %>
      <%=# image_tag listing.photos.first.carousel, id:"card_listing_preview"%>
      <%# else %>
        <img id="card_listing_preview" src="/assets/no-preview.jpg">
      <%# end %> 
     </tr> 
    <div class="card-title">
      <a href="#" class="toggle-info btn">
        <span class="left"></span>
        <span class="right"></span>
      </a>
      <h2>
          <p>RM <%= listing.price %></p>
          <%= listing.state %>
          <small>Image from unsplash.com</small>
      </h2>
    </div> -->
    <!-- <div class="card-flap flap1">
      <div class="card-description">
        <%= listing.address1 %>
        <%= listing.room_type %>
        <%= listing.description %>
        </div>
      <div class="card-flap flap2">
        <div class="card-actions">
          <%#= link_to 'Read more', listing, class: 'btn', style: 'z-index:9999;' %>
          <%#= link_to 'read more', show_path %>
        </div>
      </div>
    </div>
    </div> --> 
   <!-- </div> 
  <%# if (i + 1) % 4 == 0  %>
     </div>
    <div class="cards row"> 
 

<%# if current_user.id == listing.user_id %>
   <%#= link_to 'Show', listing %>
    <%#= link_to 'Edit', edit_listing_path(listing) %>
    <%#= link_to 'Destroy', listing, method: :delete, data: { confirm: 'Are you sure?' } %>
  <%# end %>


  <%# end %>

   -->


           
  


 





